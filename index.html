import React, { useState, useEffect } from 'react';
import { 
  Wrench, 
  DollarSign, 
  TrendingUp, 
  CheckCircle, 
  Clock, 
  MapPin, 
  Phone, 
  Hammer, 
  ShieldCheck,
  Menu,
  X
} from 'lucide-react';

const App = () => {
  const [saldo, setSaldo] = useState(0);
  const [activeTab, setActiveTab] = useState('dashboard');
  const [showNotification, setShowNotification] = useState(false);
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  // Servi√ßos oferecidos em Americana
  const servicos = [
    { id: 1, nome: "Instala√ß√£o El√©trica", preco: 150, icone: <Wrench size={20} /> },
    { id: 2, nome: "Reparo Hidr√°ulico", preco: 120, icone: <Clock size={20} /> },
    { id: 3, nome: "Pintura Geral", preco: 450, icone: <Hammer size={20} /> },
    { id: 4, nome: "Manuten√ß√£o Ar", preco: 200, icone: <ShieldCheck size={20} /> },
  ];

  const handleLucro = (valor) => {
    setSaldo(prev => prev + valor);
    setShowNotification(true);
    setTimeout(() => setShowNotification(false), 2000);
  };

  return (
    <div className="min-h-screen bg-slate-950 text-slate-100 font-sans pb-20">
      {/* Header Fixo */}
      <header className="bg-slate-900/80 backdrop-blur-md border-b border-slate-800 sticky top-0 z-50 p-4">
        <div className="max-w-4xl mx-auto flex justify-between items-center">
          <div>
            <h1 className="text-xl font-black tracking-tighter text-white">
              HOMEPRO <span className="text-emerald-500 font-bold">ERIC</span>
            </h1>
            <div className="flex items-center text-[10px] text-slate-400 gap-1">
              <MapPin size={10} className="text-emerald-500" />
              <span>UNIDADE AMERICANA - SP</span>
            </div>
          </div>
          
          <button 
            onClick={() => setIsMenuOpen(!isMenuOpen)}
            className="p-2 hover:bg-slate-800 rounded-lg transition-colors"
          >
            {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
          </button>
        </div>
      </header>

      {/* Menu Lateral Mobile/Overlay */}
      {isMenuOpen && (
        <div className="fixed inset-0 z-40 bg-slate-950/95 p-6 animate-in fade-in slide-in-from-right duration-300">
          <div className="space-y-6 mt-12 text-center text-2xl font-bold">
            <p onClick={() => {setActiveTab('dashboard'); setIsMenuOpen(false)}} className="hover:text-emerald-500 cursor-pointer">In√≠cio</p>
            <p onClick={() => {setActiveTab('servicos'); setIsMenuOpen(false)}} className="hover:text-emerald-500 cursor-pointer">Servi√ßos</p>
            <p onClick={() => {setActiveTab('gestao'); setIsMenuOpen(false)}} className="hover:text-emerald-500 cursor-pointer">Gest√£o</p>
            <div className="pt-6 border-t border-slate-800">
              <a href="https://wa.me/5519999999999" className="flex items-center justify-center gap-2 text-emerald-500">
                <Phone size={24} /> WhatsApp
              </a>
            </div>
          </div>
        </div>
      )}

      <main className="max-w-4xl mx-auto p-4 space-y-6 mt-4">
        
        {/* Card de Saldo Principal */}
        <div className="bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-[32px] border border-slate-700 shadow-2xl relative overflow-hidden">
          <div className="absolute top-0 right-0 p-4 opacity-10">
            <DollarSign size={80} />
          </div>
          <p className="text-slate-400 text-sm font-medium mb-1">Lucro Total Acumulado</p>
          <h2 className="text-5xl font-black text-white mb-6">
            R$ {saldo.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
          </h2>
          <div className="flex gap-2">
            <button 
              onClick={() => handleLucro(50)}
              className="flex-1 bg-emerald-600 hover:bg-emerald-500 active:scale-95 py-4 rounded-2xl font-bold transition-all shadow-lg shadow-emerald-900/20 flex items-center justify-center gap-2"
            >
              <TrendingUp size={20} /> GERAR R$ 50
            </button>
          </div>
        </div>

        {/* Abas de Conte√∫do */}
        <div className="grid grid-cols-2 gap-4">
          <div 
            onClick={() => setActiveTab('servicos')}
            className={p-4 rounded-2xl border transition-all cursor-pointer ${activeTab === 'servicos' ? 'bg-emerald-500/10 border-emerald-500' : 'bg-slate-900 border-slate-800'}}
          >
            <Hammer className={activeTab === 'servicos' ? 'text-emerald-500' : 'text-slate-500'} />
            <p className="mt-2 font-bold">Servi√ßos</p>
          </div>
          <div 
            onClick={() => setActiveTab('gestao')}
            className={p-4 rounded-2xl border transition-all cursor-pointer ${activeTab === 'gestao' ? 'bg-emerald-500/10 border-emerald-500' : 'bg-slate-900 border-slate-800'}}
          >
            <ShieldCheck className={activeTab === 'gestao' ? 'text-emerald-500' : 'text-slate-500'} />
            <p className="mt-2 font-bold">Relat√≥rios</p>
          </div>
        </div>

        {/* Lista de Servi√ßos Din√¢mica */}
        <div className="space-y-4">
          <h3 className="text-lg font-bold flex items-center gap-2 px-2">
            <CheckCircle size={18} className="text-emerald-500" /> 
            Tabela de Pre√ßos Americana
          </h3>
          <div className="space-y-3">
            {servicos.map((s) => (
              <div key={s.id} className="bg-slate-900/50 p-4 rounded-2xl border border-slate-800 flex justify-between items-center group hover:border-slate-600 transition-colors">
                <div className="flex items-center gap-4">
                  <div className="p-3 bg-slate-800 rounded-xl text-emerald-500 group-hover:scale-110 transition-transform">
                    {s.icone}
                  </div>
                  <div>
                    <p className="font-bold">{s.nome}</p>
                    <p className="text-xs text-slate-500 uppercase tracking-widest">AMERICANA - SP</p>
                  </div>
                </div>
                <button 
                  onClick={() => handleLucro(s.preco)}
                  className="bg-slate-800 px-4 py-2 rounded-xl text-sm font-bold hover:bg-emerald-600 transition-colors"
                >
                  + R$ {s.preco}
                </button>
              </div>
            ))}
          </div>
        </div>

      </main>

      {/* Notifica√ß√£o Flutuante */}
      {showNotification && (
        <div className="fixed bottom-24 left-1/2 -translate-x-1/2 bg-emerald-500 text-white px-6 py-3 rounded-full font-bold shadow-2xl animate-bounce z-50">
          üí∞ Lucro Registado!
        </div>
      )}

      {/* Footer / Navbar Inferior */}
      <nav className="fixed bottom-0 left-0 right-0 bg-slate-900/90 backdrop-blur-lg border-t border-slate-800 p-4 flex justify-around items-center z-50">
        <button onClick={() => setActiveTab('dashboard')} className={flex flex-col items-center ${activeTab === 'dashboard' ? 'text-emerald-500' : 'text-slate-500'}}>
          <TrendingUp size={20} />
          <span className="text-[10px] mt-1 font-bold">PAINEL</span>
        </button>
        <button onClick={() => setActiveTab('servicos')} className={flex flex-col items-center ${activeTab === 'servicos' ? 'text-emerald-500' : 'text-slate-500'}}>
          <Hammer size={20} />
          <span className="text-[10px] mt-1 font-bold">TRABALHOS</span>
        </button>
        <button className="flex flex-col items-center text-slate-500">
          <Phone size={20} />
          <span className="text-[10px] mt-1 font-bold">CONTATO</span>
        </button>
      </nav>
    </div>
  );
};

export default App;
